#!/usr/bin/env sh

# Check if server/server.js is being committed
if git diff --cached --name-only | grep -q "server/server.js"; then
  echo "ğŸ“ Detected changes to server/server.js - regenerating documentation..."
  npm run docs:generate

  # Stage the updated markdown if it changed
  if git diff --name-only | grep -q "src/content/cover-letter-how-it-works.md"; then
    echo "âœ“ Documentation updated - staging changes"
    git add src/content/cover-letter-how-it-works.md
  else
    echo "âœ“ Documentation unchanged"
  fi
fi
